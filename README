##########################################################################
README file for NUPACK 3.2.2
Copyright (c) 2007-2017, California Institute of Technology.
All Rights Reserved. See LICENSE file.

See NUPACK User Guide in /doc folder for full details.
##########################################################################

##########################################################################
Documentation
##########################################################################

Docs are located in the docs folder.
- slides source .odp file (not added yet)  
- paper source file in latex 

##########################################################################
Required Packages
##########################################################################
The following packages must be installed to compile NUPACK3.1.0:

cmake (version 2.6.0+)  - A cross-platform open-source build system.

It can be downloaded from www.cmake.org or installed using a package manager 

##########################################################################
Set up ADS codex
##########################################################################

Set up the ADS codex before running NUPACK. The output file from the codex is used as input for the NUPACK command. 

GitHub link: https://github.com/pinkbluesky/adscodex/tree/dev

Follow the how-to setup and encode in the docs folder of the adscodex. 

The relevant code is on the dev branch. git checkout dev

Then run the following encode command:
    cd adscodex
    go run encode/main.go -tbl tbl -printfmt 1 -rndmz -rndseed 10 ~/32kfilerand >> INPUT_PATH

INPUT_PATH: ~/temp/dna.in

Alternatively, use the example dna.in file located in the home dir of this repo, and follow steps 2+ in the following "Running NUPACK" section.

##########################################################################
Running NUPACK
##########################################################################

1) Run the adscodex encoder. You should get an output file dna.in


2) Move the adscodex output file to a directory, ie. ~/temp

3) Rename the adscodex output file (if needed) to have a ".in" suffix. This output file serves as the input file for NUPACK

For example: input file is
    ~/temp/dna.in

4) Build and install the NUPACK mfes command 

cd nupack3.2.2 && cd build && cmake ../ && make mfes

sudo make install
 
5) Run the NUPACK mfes command

mfes -material dna -multi PREFIX 
    where PREFIX is the prefix of the input file

For example, given the file setup described above, the command would be:
    mfes -material dna -multi ~/temp/dna

The command locates the input file as prefix concatenated with the suffix ".in"
The output of the command is the prefix concatenated with the suffix ".mfes", such as: 
    ~/temp/test1.mfes

6) Check the output

Open the output .mfes file. The first line after the comments should be a decimal number representing the sum of the oligos' MFE (minimum free energy) value. 

7) Verify the output

Run
    head ~/temp/dna.in      (or whereever your input file is)

The first line should be the number of oligos in the dataset. Divide the MFE sum from the output file by the number of oligos from the input file. The result should be around -14.

